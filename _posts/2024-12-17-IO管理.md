---
layout:     post
title:      "IO管理"
date:       2024-12-17 00:00:00
author:     "lele"
header-img: "img/home-bg.jpg"
catalog: true
mathjax: true
tags:
    - 计算机操作系统
---
# 5.1IO管理基础
- IO控制方式:
  - 查询
  - 中断
  - DMA:有四个寄存器<br>
    1. 命令/状态寄存器(CR)。接收从 CPU 发来的 I/O 命令、有关控制信息，或设备的状态。
    2. 内存地址寄存器(MAR)。在输入时，它存放将数据从设备传送到内存的起始目标地址;在输出时，它存放由内存到设备的内存源地址。
    3.  数据寄存器(DR)。暂存从设备到内存或从内存到设备的数据。
    4.  数据计数器(DC)。存放本次要传送的字(节)数。
    >DMA传送数据过程:设备发送DMA请求,CPU向控制器发送指令,同时设置MAR和DC,然后把控制权交给控制器,控制器和内存直接交互,不需要CPU参与,数据传送完,控制器向CPU发送中断请求。只有传送的开始和结束需要CPU参与
  - 通道：通道与 DMA 方式的区别是:DMA 方式需要 CPU 来控制传输的数据块大小、传输的内存位置，而通道方式中这些信息是由通道控制的。另外，每个DMA 控制器对应一台设备与内存传递数据，而一个通道可以控制多台设备与内存的数据交换。 
- **IO软件层次结构**：![text](/img/in-post/Snipaste_2024-12-17_16-53-38.png)<br>![text](/img/in-post/Snipaste_2024-12-17_17-02-36.png)
- **IO设备接口分类**：
  - **字符设备接口**：鼠标这种，没有地址，采用中断驱动方式，建议了一个字符缓冲区，读写都是对缓冲区进行
  - **块设备接口**：硬盘这种，有地址，采用DMA方式，
  - **网络设备接口**：许多操作系统提供的网络10 接口为网络套接字接口，套接字接口的系统调用使应用程序创建的本地套接字连接到远程应用程序创建的套接字，通过此连接发送和接收数据。
- **阻塞IO与非阻塞IO**：
  - 阻塞IO是指当用户进程调用IO操作时,如果IO操作没有完成,则用户进程会被阻塞,直到IO操作完成。
  - 非阻塞IO是指当用户进程调用IO操作时,如果IO操作没有完成,则用户进程可以做其他的事情，在这个阶段进程不断的询问IO操作是否完成。
# 5.2设备独立性软件
- 